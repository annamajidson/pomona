<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Videography — Pomona</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Almendra+Display&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;1,300&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #080808;
    min-height: 100vh;
    overflow-y: auto;
    font-family: 'Almendra Display', serif;
  }

  /* ---- Chalk dust ---- */
  .chalk-dust { position: fixed; inset: 0; pointer-events: none; z-index: 1; }
  .dust-particle {
    position: absolute; width: 2px; height: 2px;
    background: rgba(255,255,255,0.12); border-radius: 50%;
    animation: float-dust linear infinite;
  }
  @keyframes float-dust {
    0%   { transform: translateY(0) translateX(0); opacity: 0; }
    10%  { opacity: 0.25; }
    90%  { opacity: 0.08; }
    100% { transform: translateY(-100px) translateX(20px); opacity: 0; }
  }

  /* ---- Vignette ---- */
  .vignette {
    position: fixed; inset: 0;
    background: radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,0.72) 100%);
    pointer-events: none; z-index: 2;
  }

  /* ---- Column accents ---- */
  .column-accent {
    position: fixed; width: 1px;
    background: linear-gradient(to bottom, transparent, rgba(230,225,215,0.08) 20%, rgba(230,225,215,0.12) 50%, rgba(230,225,215,0.08) 80%, transparent);
    top: 5%; bottom: 5%; z-index: 1;
  }
  .column-accent.left  { left: 4%; }
  .column-accent.right { right: 4%; }

  /* ---- Page title ---- */
  .page-title {
    position: fixed; top: 30px; left: 50%; transform: translateX(-50%);
    z-index: 10;
    font-family: 'Almendra Display', serif; font-size: 1.05rem;
    color: rgba(230,225,215,0.35); letter-spacing: 0.38em; text-transform: uppercase;
    opacity: 0; animation: fade-in 1.5s ease-out 0.5s forwards;
    white-space: nowrap;
  }

  /* ---- Back link ---- */
  .back-link {
    position: fixed; bottom: 30px; left: 7%; z-index: 10;
    font-family: 'Cormorant Garamond', serif; font-weight: 300; font-size: 0.8rem;
    color: rgba(230,225,215,0.3); letter-spacing: 0.14em; text-decoration: none;
    transition: color 0.4s ease;
    opacity: 0; animation: fade-in 1.5s ease-out 0.9s forwards;
  }
  .back-link:hover { color: rgba(230,225,215,0.65); }

  /* ---- Logo ---- */
  .logo-container {
    position: fixed; bottom: 26px; left: 50%; transform: translateX(-50%);
    z-index: 10;
    opacity: 0; animation: fade-in 1.5s ease-out 0.8s forwards;
  }
  .logo-container img { height: 38px; width: auto; opacity: 0.45; transition: opacity 0.4s ease; }
  .logo-container img:hover { opacity: 0.75; }

  /* ---- Fig music widget ---- */
  .fig-widget {
    position: fixed; top: 22px; right: 6%; z-index: 20;
    display: flex; flex-direction: column; align-items: flex-end;
    opacity: 0; animation: fade-in 1.5s ease-out 1.1s forwards;
  }
  .fig-toggle {
    cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 5px;
    transition: transform 0.3s cubic-bezier(0.34,1.56,0.64,1);
  }
  .fig-toggle:hover { transform: scale(1.12); }
  .fig-toggle:hover .fig-label { opacity: 0.9; }
  .fig-svg { width: 52px; height: 60px; }
  .fig-track {
    font-family: 'Cormorant Garamond', serif; font-weight: 300; font-size: 0.62rem;
    color: rgba(230,225,215,0.6); letter-spacing: 0.22em; text-transform: uppercase;
    opacity: 0.75;
  }
  .fig-label {
    font-family: 'Cormorant Garamond', serif; font-weight: 300; font-size: 0.68rem;
    color: rgba(230,225,215,0.45); letter-spacing: 0.13em; opacity: 0.4; transition: opacity 0.3s ease;
  }
  .fig-playing-dot {
    width: 5px; height: 5px; border-radius: 50%; background: rgba(230,225,215,0.5);
    margin-top: 2px; opacity: 0; transition: opacity 0.4s ease;
    animation: pulse-dot 1.8s ease-in-out infinite;
  }
  .fig-playing-dot.active { opacity: 1; }
  @keyframes pulse-dot {
    0%,100% { transform: scale(1); opacity: 0.5; }
    50%      { transform: scale(1.5); opacity: 1; }
  }
  .player-panel {
    margin-top: 10px; width: 290px; background: rgba(8,8,8,0.97);
    border: 1px solid rgba(230,225,215,0.06); border-radius: 1px; overflow: hidden;
    max-height: 0; opacity: 0;
    transition: max-height 0.65s cubic-bezier(0.22,1,0.36,1), opacity 0.45s ease, border-color 0.4s ease;
  }
  .player-panel.open { max-height: 310px; opacity: 1; border-color: rgba(230,225,215,0.13); }
  .player-panel iframe { display: block; width: 100%; height: 300px; border: none; filter: grayscale(1) contrast(1.05) brightness(0.92); }

  @keyframes fade-in { to { opacity: 1; } }

  /* ---- Stars ---- */
  .star-field { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
  .star {
    position: absolute; border-radius: 50%;
    background: rgba(230,225,215,1);
    animation: twinkle ease-in-out infinite;
  }
  @keyframes twinkle {
    0%, 100% { opacity: 0.12; transform: scale(0.7); }
    50%       { opacity: 1;   transform: scale(1.25); }
  }

  /* ---- Main layout ---- */
  .main-layout {
    padding: 90px 8% 120px;
    position: relative; z-index: 5;
  }

  /* ---- Video grid ---- */
  .video-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 52px 38px;
    max-width: 1080px;
    margin: 0 auto;
  }

  /* ---- Video card ---- */
  .video-card {
    cursor: pointer;
    opacity: 0;
    animation: card-appear 1s ease-out forwards;
  }

  .video-thumb-wrapper {
    position: relative;
    aspect-ratio: 16 / 9;
    overflow: hidden;
  }

  .video-thumb {
    width: 100%; height: 100%;
    object-fit: cover;
    filter: grayscale(0.65) contrast(1.1) brightness(0.72);
    transition: filter 0.55s ease, transform 0.55s ease;
    display: block;
  }
  .video-card:hover .video-thumb {
    filter: grayscale(0.15) contrast(1.05) brightness(0.88);
    transform: scale(1.04);
  }

  /* Chalk border */
  .chalk-frame {
    position: absolute; inset: 0; pointer-events: none; z-index: 2;
    width: 100%; height: 100%;
  }

  /* Play icon */
  .play-btn {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 3; opacity: 0;
    transition: opacity 0.4s ease;
    pointer-events: none;
  }
  .video-card:hover .play-btn { opacity: 1; }

  /* Soft glow on hover */
  .video-glow {
    position: absolute; inset: 0;
    background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.055) 0%, transparent 68%);
    opacity: 0; transition: opacity 0.5s ease; pointer-events: none; z-index: 1;
  }
  .video-card:hover .video-glow { opacity: 1; }

  /* Title */
  .video-title {
    margin-top: 13px;
    font-family: 'Cormorant Garamond', serif;
    font-weight: 300; font-style: italic;
    font-size: 1.02rem;
    color: rgba(230,225,215,0.52);
    letter-spacing: 0.14em;
    text-align: center;
    transition: color 0.4s ease;
  }
  .video-card:hover .video-title { color: rgba(230,225,215,0.88); }

  @keyframes card-appear {
    0%   { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  .video-card:nth-child(1) { animation-delay: 0.7s; }
  .video-card:nth-child(2) { animation-delay: 0.9s; }
  .video-card:nth-child(3) { animation-delay: 1.1s; }
  .video-card:nth-child(4) { animation-delay: 1.3s; }
  .video-card:nth-child(5) { animation-delay: 1.5s; }
  .video-card:nth-child(6) { animation-delay: 1.7s; }
  .video-card:nth-child(7) { animation-delay: 1.9s; }
  .video-card:nth-child(8) { animation-delay: 2.1s; }
  .video-card:nth-child(9) { animation-delay: 2.3s; }

  /* ---- Lightbox ---- */
  .lightbox {
    position: fixed; inset: 0;
    background: rgba(8,8,8,0.97);
    z-index: 100;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    opacity: 0; pointer-events: none;
    transition: opacity 0.45s ease;
  }
  .lightbox.open { opacity: 1; pointer-events: all; }

  .lightbox-inner {
    position: relative;
    width: min(88vw, 980px);
    transform: scale(0.93);
    transition: transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .lightbox.open .lightbox-inner { transform: scale(1); }

  .lightbox-video {
    position: relative;
    aspect-ratio: 16 / 9;
    width: 100%;
  }
  .lightbox-video iframe {
    position: absolute; inset: 0;
    width: 100%; height: 100%; border: none;
  }

  /* Chalk border around lightbox */
  .lightbox-frame {
    position: absolute; inset: 0; pointer-events: none; z-index: 2;
    width: 100%; height: 100%;
  }

  .lightbox-title {
    margin-top: 22px; text-align: center;
    font-family: 'Almendra Display', serif;
    font-size: 1.45rem;
    color: rgba(230,225,215,0.72);
    letter-spacing: 0.22em;
  }

  .lightbox-close {
    position: absolute; top: -48px; right: 0;
    font-family: 'Cormorant Garamond', serif; font-weight: 300;
    font-size: 2rem; line-height: 1;
    color: rgba(230,225,215,0.35);
    cursor: pointer; background: none; border: none; padding: 4px;
    transition: color 0.3s ease;
  }
  .lightbox-close:hover { color: rgba(230,225,215,0.85); }

  .lightbox-nav {
    position: absolute; top: 50%; transform: translateY(-50%);
    font-family: 'Cormorant Garamond', serif; font-weight: 300;
    font-size: 2.2rem; line-height: 1;
    color: rgba(230,225,215,0.28);
    cursor: pointer; background: none; border: none; padding: 10px;
    transition: color 0.3s ease; z-index: 3;
  }
  .lightbox-nav:hover { color: rgba(230,225,215,0.75); }
  .lightbox-nav.prev { right: calc(100% + 12px); }
  .lightbox-nav.next { left: calc(100% + 12px); }

  /* Counter */
  .lightbox-counter {
    position: absolute; bottom: -40px; left: 50%; transform: translateX(-50%);
    font-family: 'Cormorant Garamond', serif; font-weight: 300; font-style: italic;
    font-size: 0.78rem; color: rgba(230,225,215,0.28); letter-spacing: 0.2em;
    white-space: nowrap;
  }

  /* ---- Responsive ---- */
  @media (max-width: 820px) {
    .video-grid { grid-template-columns: repeat(2, 1fr); gap: 36px 24px; }
    .lightbox-nav { display: none; }
    .lightbox-inner { width: 92vw; }
  }
  @media (max-width: 480px) {
    .video-grid { grid-template-columns: 1fr; gap: 36px; }
    .main-layout { padding: 80px 6% 110px; }
  }
</style>
</head>
<body>

<!-- Stars -->
<div class="star-field" id="starField"></div>

<div class="chalk-dust" id="chalkDust"></div>
<div class="vignette"></div>
<div class="column-accent left"></div>
<div class="column-accent right"></div>

<div class="page-title">Videography</div>
<a href="pomona.html" class="back-link">← return to the garden</a>

<div class="logo-container">
  <img src="LOGO_ANNAMAJIDSON_BLANC.png" alt="Pomona">
</div>

<!-- Fig music widget -->
<div class="fig-widget">
  <div class="fig-toggle" onclick="togglePlayer()">
    <svg class="fig-svg" viewBox="0 0 38 44" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="chalk-fig" x="-20%" y="-15%" width="140%" height="130%">
          <feTurbulence type="fractalNoise" baseFrequency="0.62" numOctaves="2" result="noise" seed="14"/>
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="1.3" xChannelSelector="R" yChannelSelector="G"/>
          <feGaussianBlur stdDeviation="0.28"/>
        </filter>
      </defs>
      <g filter="url(#chalk-fig)">
        <path d="M 19 5 C 19 5, 19 11, 19 14" fill="none" stroke="rgba(230,225,215,0.78)" stroke-width="1.6" stroke-linecap="round"/>
        <path d="M 19 14 C 12 16, 6 22, 6 30 C 6 37, 12 42, 19 42 C 26 42, 32 37, 32 30 C 32 22, 26 16, 19 14" fill="rgba(230,225,215,0.04)" stroke="rgba(230,225,215,0.84)" stroke-width="1.6" stroke-linecap="round"/>
        <path d="M 19 33 L 19 41" fill="none" stroke="rgba(230,225,215,0.11)" stroke-width="0.8"/>
        <path d="M 19 14 C 12.5 16, 6.5 23, 6.5 30 C 6.5 37.5, 12.5 42.5, 19 43" fill="none" stroke="rgba(230,225,215,0.22)" stroke-width="0.9" stroke-dasharray="2.5 5" stroke-linecap="round"/>
      </g>
    </svg>
    <span class="fig-label">now playing</span>
    <span class="fig-track">Pomona EP</span>
    <div class="fig-playing-dot" id="playDot"></div>
  </div>
  <div class="player-panel" id="playerPanel">
    <iframe allow="autoplay *; encrypted-media *;" frameborder="0"
      sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"
      src="https://embed.music.apple.com/fr/album/pomona-ep/1782326530?l=en-GB&autoPlay=1"></iframe>
  </div>
</div>

<!-- Video grid -->
<div class="main-layout">
  <div class="video-grid" id="videoGrid"></div>
</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <div class="lightbox-inner">
    <button class="lightbox-close" onclick="closeLightbox()">×</button>
    <button class="lightbox-nav prev" onclick="navigate(-1)">‹</button>
    <button class="lightbox-nav next" onclick="navigate(1)">›</button>

    <div class="lightbox-video">
      <iframe id="lbIframe" src="" allowfullscreen
        allow="autoplay; encrypted-media; picture-in-picture"></iframe>

      <!-- chalk border around video -->
      <svg class="lightbox-frame" viewBox="0 0 160 90" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="chalk-lb" x="-4%" y="-4%" width="108%" height="108%">
            <feTurbulence type="fractalNoise" baseFrequency="0.68" numOctaves="2" result="n" seed="7"/>
            <feDisplacementMap in="SourceGraphic" in2="n" scale="0.8" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="0.25"/>
          </filter>
        </defs>
        <rect x="0.6" y="0.6" width="158.8" height="88.8" fill="none"
          stroke="rgba(230,225,215,0.22)" stroke-width="0.7"
          filter="url(#chalk-lb)"/>
      </svg>
    </div>

    <div class="lightbox-title" id="lbTitle"></div>
    <div class="lightbox-counter" id="lbCounter"></div>
  </div>
</div>

<script>
const VIDEOS = [
  { title: 'Bleu',           id: '1056297628',  platform: 'vimeo' },
  { title: 'Natasha',        id: 'PN_Wn0KCJjM', platform: 'youtube' },
  { title: 'Mes Affaires',   id: 'Ct5FPn0CRw4', platform: 'youtube' },
  { title: 'Falaise',        id: 'j70gdZzqz7U', platform: 'youtube' },
  { title: 'La Fin',         id: 'hbMt36LxTc8', platform: 'youtube' },
  { title: 'Echo',           id: 'j8oGy3UpIms', platform: 'youtube' },
  { title: 'Soleil Cendres', id: 'LwTrWovXhaE', platform: 'youtube' },
  { title: 'En plein vol',   id: 'HoBGMVVUp88', platform: 'youtube' },
  { title: 'En Deux Mots',   id: 'xngWn_q0TdA', platform: 'youtube' },
];

function thumbSrc(v) {
  if (v.platform === 'vimeo') return ''; // filled in async below
  return `https://img.youtube.com/vi/${v.id}/maxresdefault.jpg`;
}

function embedSrc(v) {
  if (v.platform === 'vimeo')
    return `https://player.vimeo.com/video/${v.id}?autoplay=1&title=0&byline=0&portrait=0`;
  return `https://www.youtube.com/embed/${v.id}?autoplay=1&rel=0&modestbranding=1`;
}

let currentIdx = 0;

// ---- Build grid ----
const grid = document.getElementById('videoGrid');
VIDEOS.forEach((v, i) => {
  const card = document.createElement('div');
  card.className = 'video-card';
  const src = thumbSrc(v);
  card.innerHTML = `
    <div class="video-thumb-wrapper">
      <div class="video-glow"></div>
      <img class="video-thumb" id="thumb-${i}"
        src="${src}"
        alt="${v.title}"
        onerror="this.src='https://img.youtube.com/vi/${v.id}/hqdefault.jpg'">
      <svg class="chalk-frame" viewBox="0 0 160 90" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="cf${i}" x="-5%" y="-5%" width="110%" height="110%">
            <feTurbulence type="fractalNoise" baseFrequency="0.72" numOctaves="2" result="n" seed="${i + 3}"/>
            <feDisplacementMap in="SourceGraphic" in2="n" scale="1.4" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="0.3"/>
          </filter>
        </defs>
        <rect x="0.8" y="0.8" width="158.4" height="88.4" fill="none"
          stroke="rgba(230,225,215,0.3)" stroke-width="0.9"
          filter="url(#cf${i})"/>
      </svg>
      <svg class="play-btn" width="46" height="46" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">
        <circle cx="23" cy="23" r="21" fill="rgba(8,8,8,0.62)" stroke="rgba(230,225,215,0.45)" stroke-width="1"/>
        <polygon points="19,16 34,23 19,30" fill="rgba(230,225,215,0.72)"/>
      </svg>
    </div>
    <div class="video-title">${v.title}</div>
  `;
  card.addEventListener('click', () => openLightbox(i));
  grid.appendChild(card);

  // Fetch Vimeo thumbnail asynchronously
  if (v.platform === 'vimeo') {
    fetch(`https://vimeo.com/api/oembed.json?url=https://vimeo.com/${v.id}`)
      .then(r => r.json())
      .then(d => {
        const img = document.getElementById(`thumb-${i}`);
        if (img && d.thumbnail_url) img.src = d.thumbnail_url;
      })
      .catch(() => {});
  }
});

// ---- Lightbox ----
function openLightbox(idx) {
  currentIdx = idx;
  updateLightbox();
  document.getElementById('lightbox').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function updateLightbox() {
  const v = VIDEOS[currentIdx];
  document.getElementById('lbIframe').src = embedSrc(v);
  document.getElementById('lbTitle').textContent = v.title;
  document.getElementById('lbCounter').textContent =
    `${currentIdx + 1} / ${VIDEOS.length}`;
}

function closeLightbox() {
  document.getElementById('lightbox').classList.remove('open');
  document.getElementById('lbIframe').src = '';
  document.body.style.overflow = '';
}

function navigate(dir) {
  currentIdx = (currentIdx + dir + VIDEOS.length) % VIDEOS.length;
  updateLightbox();
}

// Click outside to close
document.getElementById('lightbox').addEventListener('click', function(e) {
  if (e.target === this) closeLightbox();
});

// Keyboard nav
document.addEventListener('keydown', e => {
  if (!document.getElementById('lightbox').classList.contains('open')) return;
  if (e.key === 'Escape')      closeLightbox();
  if (e.key === 'ArrowRight')  navigate(1);
  if (e.key === 'ArrowLeft')   navigate(-1);
});

// ---- Fig widget ----
let playerOpen = false;
function togglePlayer() {
  playerOpen = !playerOpen;
  document.getElementById('playerPanel').classList.toggle('open', playerOpen);
  document.getElementById('playDot').classList.toggle('active', playerOpen);
}

// ---- Stars ----
const sf = document.getElementById('starField');
for (let i = 0; i < 55; i++) {
  const s = document.createElement('div');
  s.className = 'star';
  const size = 0.8 + Math.random() * 1.4;
  s.style.cssText = `left:${Math.random()*100}%;top:${Math.random()*100}%;width:${size}px;height:${size}px;animation-duration:${2+Math.random()*4}s;animation-delay:${Math.random()*5}s;`;
  sf.appendChild(s);
}

// ---- Chalk dust ----
const dc = document.getElementById('chalkDust');
for (let i = 0; i < 25; i++) {
  const p = document.createElement('div');
  p.className = 'dust-particle';
  p.style.left = Math.random()*100+'%';
  p.style.top  = (30 + Math.random()*60)+'%';
  p.style.animationDuration = (5 + Math.random()*10)+'s';
  p.style.animationDelay   = (Math.random()*12)+'s';
  p.style.width = p.style.height = (1 + Math.random()*1.5)+'px';
  dc.appendChild(p);
}
</script>
</body>
</html>
